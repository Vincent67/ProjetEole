<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Connexion avec le chiffrement SSL</title><meta name="Language" content="fr-fr" /><meta name="System.Keywords" content="chiffrement" /><meta name="System.Keywords" content="SSL" /><meta name="Microsoft.Help.Id" content="ec91fa8a-ab7e-4c1e-a05a-d7951ddf33b1" /><meta name="Description" content="Les exemples de cette rubrique décrivent comment utiliser les propriétés de chaîne de connexion qui permettent aux applications d'utiliser le chiffrement SSL (Secure Sockets Layer) dans une application Java." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Connexion avec le chiffrement SSL</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Les exemples de cette rubrique décrivent comment utiliser les propriétés de chaîne de connexion qui permettent aux applications d'utiliser le chiffrement SSL (Secure Sockets Layer) dans une application Java. Pour plus d'informations sur ces nouvelles propriétés de chaîne de connexion, telles que <span class="label">encrypt</span>, <span class="label">trustServerCertificate</span>, <span class="label">trustStore</span>, <span class="label">trustStorePassword</span> et <span class="label">hostNameInCertificate</span>, consultez <span sdata="link"><a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">Définition des propriétés de connexion</a></span>.</p><p>Lorsque la propriété <span class="label">encrypt</span> a la valeur <span sdata="langKeyword" value="true"><span class="keyword">true</span></span> et que la propriété <span class="label">trustServerCertificate</span> a la valeur <span sdata="langKeyword" value="true"><span class="keyword">true</span></span>, le Pilote JDBC Microsoft pour SQL Server ne valide pas le certificat SSL SQL Server. Cela est généralement requis pour autoriser les connexions dans les environnements de test, par exemple lorsque l'instance SQL Server possède seulement un certificat auto-signé.</p><p>L'exemple de code suivant montre comment définir la propriété <span class="label">trustServerCertificate</span> dans une chaîne de connexion :</p><div class="sampleCode"><span codeLanguage="other"><pre>String connectionUrl = 
    "jdbc:sqlserver://localhost:1433;" +
     "databaseName=AdventureWorks;integratedSecurity=true;" +
     "encrypt=true;trustServerCertificate=true";</pre></span></div><p>Lorsque la propriété <span class="label">encrypt</span> a la valeur <span sdata="langKeyword" value="true"><span class="keyword">true</span></span> et que la propriété <span class="label">trustServerCertificate</span> a la valeur <span sdata="langKeyword" value="false"><span class="keyword">false</span></span>, le Pilote JDBC Microsoft pour SQL Server valide le certificat SSL SQL Server. La validation du certificat de serveur est une partie de la négociation SSL qui garantit qu'il s'agit du serveur correct avec lequel établir une connexion. Afin de valider le certificat de serveur, les informations d'approbation doivent être fournies au moment de la connexion en utilisant les propriétés de connexion <span class="label">trustStore</span> et <span class="label">trustStorePassword</span> de manière explicite ou en utilisant le magasin d'approbations par défaut de la machine virtuelle Java (JVM) sous-jacente de manière implicite. </p><p>La propriété <span class="label">trustStore</span> spécifie le chemin d'accès (y compris le nom de fichier) au fichier trustStore de certificat, qui contient la liste des certificats approuvés par le client. La propriété <span class="label">trustStorePassword</span> spécifie le mot de passe utilisé pour vérifier l'intégrité des données trustStore. Pour plus d'informations sur l'utilisation du magasin d'approbations par défaut de la machine virtuelle Java, consultez <span sdata="link"><a href="ae34cd1f-3569-4759-80c7-7c9b33b3e9eb.htm">Configuration du client pour le chiffrement SSL</a></span>.</p><p>L'exemple de code suivant montre comment définir les propriétés <span class="label">trustStore</span> et <span class="label">trustStorePassword</span> dans une chaîne de connexion : </p><div class="sampleCode"><span codeLanguage="other"><pre>String connectionUrl = 
    "jdbc:sqlserver://localhost:1433;" +
     "databaseName=AdventureWorks;integratedSecurity=true;" +
     "encrypt=true; trustServerCertificate=false;" +
     "trustStore=storeName;trustStorePassword=storePassword";</pre></span></div><p>Le pilote JDBC fournit une propriété supplémentaire, <span class="label">hostNameInCertificate</span>, qui spécifie le nom d'hôte du serveur. La valeur de cette propriété doit correspondre à la propriété de sujet du certificat. </p><p>L'exemple de code suivant montre comment utiliser la propriété <span class="label">hostNameInCertificate</span> dans une chaîne de connexion :</p><div class="sampleCode"><span codeLanguage="other"><pre>String connectionUrl = 
    "jdbc:sqlserver://localhost:1433;" +
     "databaseName=AdventureWorks;integratedSecurity=true;" +
     "encrypt=true; trustServerCertificate=false;" +
     "trustStore=storeName;trustStorePassword=storePassword" +
     "hostNameInCertificate=hostName";</pre></span></div><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Vous pouvez également définir la valeur des propriétés de connexion en utilisant les méthodes d'accesseur <span sdata="langKeyword" value="setter"><span class="keyword">setter</span></span> appropriées fournies par la classe <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>.</p></div><p>Si la propriété <span class="label">encrypt</span> a la valeur <span sdata="langKeyword" value="true"><span class="keyword">true</span></span>, si la propriété <span class="label">trustServerCertificate</span> a la valeur <span sdata="langKeyword" value="false"><span class="keyword">false</span></span> et si le nom su serveur de la chaîne de connexion ne correspond pas au nom du serveur du certification SSL SQL Server, le message d'erreur suivant s'affichera : Le pilote n'a pas pu établir de connexion sécurisée au serveur SQL Server à l'aide du chiffrement SSL (Secure Sockets Layer). Erreur : « java.security.cert.CertificateException : Échec de la validation du nom de serveur dans un certificat lors de l'initialisation SSL (Secure Sockets Layer). »</p></div><span id="seeAlsoSpan"><h1 class="heading">Voir aussi</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Utilisation du chiffrement SSL</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Sécurisation des applications de pilote JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Envoyez vos <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dMerci pour vos commentaires qui permettent aux équipes chargées de rédiger la documentation développeur d\'en améliorer la qualité. Pendant la révision de vos commentaires, il est possible que nous vous contactions par courrier électronique afin de vous demander des éclaircissements ou d\'autres commentaires sur la solution envisagée. Nous n\'utilisons pas votre adresse de messagerie dans un autre but et nous la supprimons une fois notre révision terminée.%0\APour plus d\'informations sur les politiques de confidentialité de Microsoft, consultez http://privacy.microsoft.com/fr-fr/default.aspx.%0\A%0\d','Commentaires client.');">commentaires</a> sur cette rubrique à Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Tous droits réservés.</a></p></span></div></div></body></html>